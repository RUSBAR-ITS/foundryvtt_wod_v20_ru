/**
 * RU-only responsive overrides for WoD20 sheets.
 * Make RU behave like DE by reusing the same layout dimensions.
 *
 * This file assumes the module's JS adds `langRU` class to the sheet root element for RU language.
 *
 * IMPORTANT:
 * - All tunable layout numbers are sourced from CSS custom properties defined in styles/ru-vars.css
 *   so we have a single source of truth.
 *
 * Scope of this patch:
 * - Keep your original geometry rules unchanged.
 * - Add ONLY:
 *   - row height control (Attributes + Abilities)
 *   - label width control (Attributes + Abilities), including supernatural variants
 *   - core stats controls (top offset, path width constraint)
 *   - path banner "single block" rendering (fit-to-text)
 *   - experience spacing (gap between Health and Experience)
 */

/* ============================================================
 * 0) Base sheet geometry (unchanged)
 * ========================================================== */

.langRU.wod-sheet:not(.minimized) {
  min-width: var(--wodru-sheet-min-width);
  width: var(--wodru-sheet-width, var(--wodru-sheet-min-width));
  min-height: var(--wodru-sheet-min-height);
}

.langRU.wod-sheet .sheet-inner-area {
  width: var(--wodru-inner-width);
}

/* ============================================================
 * 1) Attributes Section
 * ============================================================ */

.langRU.wod20 .attribute-rowheight {
  height: var(--wodru-attr-row-height);
}

.langRU.wod20 .attribute-rowheight .ability-headlineWidth {
  width: var(--wodru-attr-label-width);
}

.langRU.wod20 .attribute-rowheight .supernaturalAttribute.ability-headlineWidth {
  width: var(--wodru-attr-label-width-supernatural);
}

/* ============================================================
 * 1a) Attributes (supernatural only): prevent dot block wrapping
 * ============================================================
 * System markup uses a float-based layout:
 * - label: `pullLeft`
 * - dots:  `pullRight resource-value`
 *
 * With >5 dots (supernatural) the right float may drop to the next line
 * due to 1â€“2px rounding/scrollbar/padding differences.
 *
 * RU fix: switch ONLY supernatural attribute rows to a nowrap flex row.
 */

.langRU.wod20 .attribute-rowheight:has(.supernaturalAttribute.ability-headlineWidth) {
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
}

.langRU.wod20 .attribute-rowheight:has(.supernaturalAttribute.ability-headlineWidth) .pullLeft,
.langRU.wod20 .attribute-rowheight:has(.supernaturalAttribute.ability-headlineWidth) .pullRight {
  float: none !important;
}

.langRU.wod20 .attribute-rowheight:has(.supernaturalAttribute.ability-headlineWidth) .supernaturalAttribute.ability-headlineWidth {
  flex: 0 0 var(--wodru-attr-label-width-supernatural);
  max-width: var(--wodru-attr-label-width-supernatural);
}

.langRU.wod20 .attribute-rowheight:has(.supernaturalAttribute.ability-headlineWidth) .resource-value {
  margin-left: auto;
  flex: 0 0 auto;
  min-width: 0;
}

/* ============================================================
 * Core tab (RU only): group header -> content spacing (ATTRIBUTES)
 *
 * WoD20 renders the group headers ("Physical / Social / Mental") inside
 * a dedicated `.clearareaBox` wrapper containing `.attribute-statArea.headlineGroup`.
 * We adjust the gap by setting `margin-bottom` on THAT wrapper.
 * ============================================================ */
.langRU.wod20 .tab.core .clearareaBox:has(.attribute-statArea.headlineGroup) {
  margin-bottom: var(--wodru-core-attr-group-gap) !important;
}

/* ============================================================
 * 2) Abilities Section
 * ============================================================ */

.langRU.wod20 .ability-statArea .clearareaBox {
  height: var(--wodru-ability-row-height);
}

.langRU.wod20 .ability-statArea .clearareaBox .ability-headlineWidth {
  width: var(--wodru-ability-label-width);
}

.langRU.wod20 .ability-statArea .clearareaBox .supernaturalAttribute.ability-headlineWidth {
  width: var(--wodru-ability-label-width-supernatural);
}

/* ============================================================
 * Core tab (RU only): group header -> content spacing (ABILITIES)
 *
 * WoD20 renders the group headers ("Talents / Skills / Knowledges") inside
 * a dedicated `.clearareaBox` wrapper containing `.ability-statArea.headlineGroup`.
 * We adjust the gap by setting `margin-bottom` on THAT wrapper.
 * ============================================================ */
.langRU.wod20 .tab.core .clearareaBox:has(.ability-statArea.headlineGroup) {
  margin-bottom: var(--wodru-core-ability-group-gap) !important;
}

/* ============================================================
 * 3) Core Stats Section (Vampire core tab) - RU-only additions
 * ============================================================ */

.langRU.wod20 .tab.core .clearareaBox[style*="display: flex"] {
  margin-top: var(--wodru-corestats-top-offset);
}

.langRU.wod20 .sheet-boxcontainer.path {
  max-width: var(--wodru-path-max-width);
  margin-left: auto;
  margin-right: auto;
}

.langRU.wod20 .sheet-headline.sheet-banner-small[data-key="path"] {
  max-width: var(--wodru-path-max-width);
  margin-left: auto;
  margin-right: auto;
}

/* ============================================================
 * 4) Path banner: render as a single block around text (fit-to-text)
 * ============================================================ */

.langRU.wod20 .sheet-headline.sheet-banner-small[data-key="path"] {
  background: none !important;
  text-align: center;
}

.langRU.wod20 .sheet-headline.sheet-banner-small[data-key="path"] > .sheet-banner-text {
  display: inline-block;
  padding: var(--wodru-path-banner-padding-y) var(--wodru-path-banner-padding-x);
  border-radius: var(--wodru-path-banner-radius);

  /*
   * Use an absolute system asset path to avoid 404 when loaded from a module stylesheet.
   * This fixes the V20Banner_small.png errors in the console.
   */
   
  background-size: 100% 100%;
  background-repeat: no-repeat;
  background-position: center;

  text-align: center;
}

/* ============================================================
 * 5) Experience spacing (gap between Health and Experience)
 * ============================================================
 *
 * Target EXACT element (your pasted HTML):
 * - `.sheet-headline.headlineGroup.splatFont` which CONTAINS `.experienceValue`
 *
 * Why `:has(...)`:
 * - There is no unique class on the parent block for experience.
 * - We need to identify the correct parent without touching other headlineGroup blocks.
 *
 * NOTE:
 * - Experience parent has inline style `margin-top: -4px`.
 * - We override it via `!important`.
 */
.langRU.wod20 .tab.core .sheet-headline.headlineGroup.splatFont:has(.experienceValue) {
  margin-top: var(--wodru-experience-top-gap) !important;
}
